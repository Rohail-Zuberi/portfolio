import"./main.astro_astro_type_script_index_0_lang.DF2keTmI.js";import"./main.astro_astro_type_script_index_1_lang.CbgSXvim.js";import"./index.astro_astro_type_script_index_0_lang.C06vs49o.js";import"./index.astro_astro_type_script_index_0_lang.n4tcr7eN.js";const r=document.querySelector("#contact-form"),o=document.querySelector("#contact-subject"),e=document.querySelector("#contact-body"),d=document.querySelector("#contact-body-counter"),a=document.querySelector("#contact-submit"),t=document.querySelector("#contact-status-wrap"),m=document.querySelector("#contact-status-icon"),f=document.querySelector("#contact-status-title"),i=document.querySelector("#contact-status-message"),u=()=>{if(!(e instanceof HTMLTextAreaElement)||!(d instanceof HTMLElement))return;const n=e.maxLength,s=n-e.value.length;d.textContent=`${s}/${n}`};u();e instanceof HTMLTextAreaElement&&e.addEventListener("input",u);const y={sending:`
      <svg class="h-4 w-4 animate-spin" viewBox="0 0 24 24" fill="none">
        <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="3"></circle>
        <path class="opacity-90" d="M22 12a10 10 0 00-10-10" stroke="currentColor" stroke-width="3" stroke-linecap="round"></path>
      </svg>
    `,success:`
      <svg class="h-4 w-4" viewBox="0 0 24 24" fill="none">
        <path d="M20 7L10 17l-5-5" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"></path>
      </svg>
    `,error:`
      <svg class="h-4 w-4" viewBox="0 0 24 24" fill="none">
        <path d="M12 8v5m0 3h.01M22 12A10 10 0 112 12a10 10 0 0120 0z" stroke="currentColor" stroke-width="2.2" stroke-linecap="round" stroke-linejoin="round"></path>
      </svg>
    `},g=()=>{t instanceof HTMLElement&&(t.classList.add("hidden"),t.setAttribute("aria-hidden","true"),t.dataset.state="idle")},c=(n,s,h,l=void 0)=>{!(t instanceof HTMLElement)||!(m instanceof HTMLElement)||!(f instanceof HTMLElement)||!(i instanceof HTMLElement)||(t.classList.remove("contact-status--sending","contact-status--success","contact-status--error","hidden","contact-status-enter"),t.classList.add(`contact-status--${n}`),t.dataset.state=n,t.setAttribute("aria-hidden","false"),n==="error"?(t.setAttribute("role","alert"),t.setAttribute("aria-live","assertive")):(t.setAttribute("role","status"),t.setAttribute("aria-live","polite")),m.innerHTML=y[n]||"",f.textContent=s,typeof l=="string"?i.innerHTML=l:i.textContent=h,t.offsetWidth,t.classList.add("contact-status-enter"))},p=()=>{t instanceof HTMLElement&&t.dataset.state==="error"&&g()};o instanceof HTMLInputElement&&o.addEventListener("input",p);e instanceof HTMLTextAreaElement&&e.addEventListener("input",p);r instanceof HTMLFormElement&&r.addEventListener("submit",n=>{if(n.preventDefault(),!(!(o instanceof HTMLInputElement)||!(e instanceof HTMLTextAreaElement))){if(!o.checkValidity()||!e.checkValidity()){r.reportValidity();return}a instanceof HTMLButtonElement&&(a.disabled=!0,c("sending","Sending your message...","Please wait a moment while we deliver it."),fetch("/api/contact",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({subject:o.value.trim(),body:e.value.trim()})}).then(async s=>{if(!s.ok)throw new Error("not_sent");r.reset(),u(),c("success","Message sent","Thanks! Your message was sent. I'll get back to you soon.")}).catch(()=>{c("error","Message not sent","Sorry, please try again in a moment.","Sorry, please try again in a moment. If this keeps happening, email <strong>rohailzuberi5@gmail.com</strong>.")}).finally(()=>{a.disabled=!1}))}});
